<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Analytics – Zyberfy</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f4;
    }
    header {
      background: #fff;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      border-bottom: 1px solid #ddd;
      position: relative;
    }
    header a.back {
      color: #0070f3;
      text-decoration: none;
      font-size: 0.9rem;
      margin-right: auto;
    }
    .hamburger {
      width: 24px;
      cursor: pointer;
    }
    .hamburger .bar {
      height: 3px;
      background: #333;
      margin: 4px 0;
      border-radius: 2px;
    }
    .dropdown {
      position: absolute;
      top: 56px;
      right: 24px;
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 6px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: none;
      flex-direction: column;
      min-width: 160px;
      z-index: 10;
    }
    .dropdown a {
      padding: 10px 16px;
      text-decoration: none;
      color: #333;
      border-bottom: 1px solid #eee;
    }
    .dropdown a:last-child { border-bottom: none; }
    .dropdown a:hover { background: #f0f0f0; }

    .container {
      max-width: 800px;
      margin: 24px auto;
      padding: 0 16px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      grid-gap: 24px;
    }
    .chart-card {
      background: #fff;
      padding: 16px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .chart-card h2 {
      margin: 0 0 12px;
      font-size: 1.1rem;
      color: #333;
    }
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      grid-gap: 16px;
      width: 100%;
    }
    .metric {
      background: #fff;
      padding: 12px;
      border-radius: 8px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.08);
      text-align: center;
    }
    .metric .value {
      font-size: 1.5rem;
      font-weight: bold;
      color: #0070f3;
    }
    .metric .label {
      font-size: 0.85rem;
      color: #555;
    }
  </style>
</head>
<body>

  <header>
    <a href="{{ url_for('dashboard') }}" class="back">← Dashboard</a>
    <div class="hamburger" onclick="toggleDropdown()">
      <div class="bar"></div>
      <div class="bar"></div>
      <div class="bar"></div>
    </div>
    <nav id="dropdown" class="dropdown">
      <a href="{{ url_for('dashboard') }}">Home</a>
      <a href="{{ url_for('analytics') }}">Analytics</a>
      <a href="{{ url_for('logout') }}">Logout</a>
    </nav>
  </header>

  <div class="container">
    <!-- Donut chart card -->
    <div class="chart-card">
      <h2>Conversion Rate</h2>
      <canvas id="donutChart"></canvas>
    </div>

    <!-- Line chart card -->
    <div class="chart-card">
      <h2>Proposals This Month</h2>
      <canvas id="lineChart"></canvas>
    </div>

    <!-- Metrics cards -->
    <div class="metric">
      <div class="value">42</div>
      <div class="label">Daily Active</div>
    </div>
    <div class="metric">
      <div class="value">128</div>
      <div class="label">Pageviews</div>
    </div>
    <div class="metric">
      <div class="value">9%</div>
      <div class="label">Bounce Rate</div>
    </div>
    <div class="metric">
      <div class="value">24</div>
      <div class="label">New Sign-ups</div>
    </div>
  </div>

  <script>
    function toggleDropdown() {
      const dd = document.getElementById('dropdown');
      dd.style.display = dd.style.display === 'flex' ? 'none' : 'flex';
    }
    document.addEventListener('click', e => {
      const dd = document.getElementById('dropdown'),
            hb = document.querySelector('.hamburger');
      if (!dd.contains(e.target) && !hb.contains(e.target)) dd.style.display = 'none';
    });

    // Donut (conversion rate)
    new Chart(document.getElementById('donutChart'), {
      type: 'doughnut',
      data: {
        labels: ['Converted', 'Dropped'],
        datasets: [{
          data: [39, 61],
          backgroundColor: ['#0070f3','#e0e0e0'],
          borderWidth: 0
        }]
      },
      options: {
        cutout: '70%',
        plugins: {
          legend: { display: false },
          tooltip: { enabled: false },
          beforeDraw: (chart) => {
            const {ctx, chartArea: {width, height}} = chart;
            ctx.save();
            ctx.fillStyle = '#333';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('39%', width/2, height/2);
            ctx.restore();
          }
        }
      }
    });

    // Line (proposals over days)
    new Chart(document.getElementById('lineChart'), {
      type: 'line',
      data: {
        labels: ['1','5','10','15','20','25','30'],
        datasets: [{
          label: 'Proposals',
          data: [5,7,12,9,15,18,22],
          borderColor: '#0070f3',
          backgroundColor: 'rgba(0,112,243,0.1)',
          tension: 0.3,
          fill: true,
          pointRadius: 3
        }]
      },
      options: {
        scales: {
          x: { grid: { display: false } },
          y: {
            beginAtZero: true,
            grid: { color: '#eee' }
          }
        },
        plugins: { legend: { display: false } }
      }
    });
  </script>

</body>
</html>
