{% extends "base.html" %}
{% block title %}Submit Your Proposal | Zyberfy{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto mt-10 p-6 bg-white rounded-xl shadow-md space-y-8">

  {% if submitted %}
    <div class="bg-green-100 border border-green-300 text-green-800 px-4 py-3 rounded shadow text-sm mb-6">
      <strong>Thank you!</strong> Your proposal has been submitted.
      Our system has emailed you a personalized version of your request. Please check your inbox.
    </div>

    {% if proposal %}
    <h2 class="text-xl font-semibold text-blue-600 mb-4">Proposal Summary</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm text-gray-700">
      <div><strong>Name:</strong> {{ proposal.lead_name }}</div>
      <div><strong>Email:</strong> {{ proposal.lead_email }}</div>
      <div><strong>Company:</strong> {{ proposal.lead_company }}</div>
      <div><strong>Services:</strong> {{ proposal.services }}</div>
      <div><strong>Budget:</strong> {{ proposal.budget }}</div>
      <div><strong>Timeline:</strong> {{ proposal.timeline }}</div>
      <div class="sm:col-span-2"><strong>Message:</strong> {{ proposal.message }}</div>
    </div>
    {% endif %}

    <div class="mt-8">
      <h3 class="text-lg font-medium text-blue-600 mb-2">What Happens Next?</h3>
      <p class="text-sm text-gray-700">
        A personalized AI-generated proposal was just sent to <strong>{{ proposal.lead_email }}</strong>. If you don’t see it within a few minutes, check your spam or promotions folder.
      </p>
    </div>

    <div class="mt-10 text-center">
      <a href="/" class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded shadow text-sm">
        Back to Homepage
      </a>
    </div>

  {% else %}
    <h1 class="text-2xl font-bold text-blue-600 text-center">Proposal Submission</h1>

    <!-- Proposal Form for Leads -->
    <form method="POST" class="space-y-4">
      <div>
        <label for="name" class="block font-medium text-gray-700 mb-1">Your Name</label>
        <input type="text" id="name" name="name" required class="w-full border rounded px-3 py-2" />
      </div>

      <div>
        <label for="email" class="block font-medium text-gray-700 mb-1">Your Email</label>
        <input type="email" id="email" name="email" required class="w-full border rounded px-3 py-2" />
      </div>

      <div>
        <label for="company" class="block font-medium text-gray-700 mb-1">Company Name</label>
        <input type="text" id="company" name="company" class="w-full border rounded px-3 py-2" />
      </div>

      <div>
        <label for="services" class="block font-medium text-gray-700 mb-1">Services Needed</label>
        <input type="text" id="services" name="services" class="w-full border rounded px-3 py-2" />
      </div>

      <div>
        <label for="budget" class="block font-medium text-gray-700 mb-1">Estimated Budget</label>
        <select id="budget" name="budget" class="w-full border rounded px-3 py-2">
          <option value="">Select a range</option>
          <option value="<$1,000">Less than $1,000</option>
          <option value="$1,000–$3,000">$1,000–$3,000</option>
          <option value="$3,000–$5,000">$3,000–$5,000</option>
          <option value=">$5,000">More than $5,000</option>
        </select>
      </div>

      <div>
        <label for="timeline" class="block font-medium text-gray-700 mb-1">Timeline / Deadline</label>
        <input type="text" id="timeline" name="timeline" class="w-full border rounded px-3 py-2" />
      </div>

      <div>
        <label for="message" class="block font-medium text-gray-700 mb-1">Additional Message</label>
        <textarea id="message" name="message" rows="5" class="w-full border rounded px-3 py-2"></textarea>
      </div>

      <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-2 rounded hover:bg-blue-700 transition">
        Submit Proposal
      </button>
    </form>
  {% endif %}
</div>
{% endblock %}
