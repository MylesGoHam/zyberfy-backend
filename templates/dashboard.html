<!-- templates/dashboard.html -->
{% extends "base.html" %}
{% block title %}Dashboard | Zyberfy{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-4 py-10">
  <!-- Header -->
  <div class="flex flex-col md:flex-row items-start md:items-center justify-between mb-6">
    <div>
      <h2 class="text-3xl font-bold text-gray-900 tracking-tight">Dashboard</h2>
      <p class="text-sm text-gray-500 mt-1">Welcome, {{ first_name }}!</p>
    </div>
    <div class="mt-4 md:mt-0">
      <a href="{{ url_for('settings') }}" class="inline-flex items-center px-4 py-2 border border-gray-300 text-sm rounded-lg text-gray-700 hover:bg-gray-50">
        Settings
      </a>
    </div>
  </div>

  <!-- Buttons -->
  <div class="flex flex-wrap gap-4 mb-8">
    <a href="{{ url_for('automation') }}" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
      Automation
    </a>
    <a href="{{ url_for('proposal') }}" class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700">
      New Proposal
    </a>
    <a href="{{ url_for('analytics') }}" class="bg-gray-100 text-gray-800 px-6 py-3 rounded-lg border hover:border-gray-400">
      Analytics
    </a>
  </div>

  <!-- Graph -->
  <div class="bg-white shadow rounded-xl p-6">
    <h3 class="text-lg font-semibold mb-4">Proposal Activity</h3>
    <canvas id="proposalChart" class="w-full h-64"></canvas>
  </div>
</div>

<!-- Chart JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById("proposalChart").getContext("2d");
  new Chart(ctx, {
    type: "line",
    data: {
      labels: {{ line_labels|tojson }},
      datasets: [
        {
          label: "Generated",
          data: {{ generated_data|tojson }},
          borderColor: "#3b82f6",
          fill: false,
        },
        {
          label: "Sent",
          data: {{ sent_data|tojson }},
          borderColor: "#10b981",
          fill: false,
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
</script>
{% endblock %}
